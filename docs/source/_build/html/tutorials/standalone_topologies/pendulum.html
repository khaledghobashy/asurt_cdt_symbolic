

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Pendulum &mdash; uraeus.smbd 0.0.1.dev3 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Template-Based Topologies" href="../template_based_topologies/index.html" />
    <link rel="prev" title="Standalone Topologies" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> uraeus.smbd
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../background/index.html">Background</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Tutorials</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#symboilc-models">Symboilc Models</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../index.html#guide">Guide</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="index.html">Standalone Topologies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../template_based_topologies/index.html">Template-Based Topologies</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../implementation/index.html">Implementation Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/index.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">License</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">uraeus.smbd</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Tutorials</a> &raquo;</li>
        
          <li><a href="index.html">Standalone Topologies</a> &raquo;</li>
        
      <li>Pendulum</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/tutorials/standalone_topologies/pendulum.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pendulum">
<h1>Pendulum<a class="headerlink" href="#pendulum" title="Permalink to this headline">¶</a></h1>
<hr class="docutils" />
<div class="section" id="model-description">
<h2>Model Description<a class="headerlink" href="#model-description" title="Permalink to this headline">¶</a></h2>
<p>A pendulum is a weight suspended from a pivot so that it can swing freely.
It consists of two bodies, the pendulum and the ground, attached together
through a pin/revolute joint. More general information about the pendulum can
be found <a class="reference external" href="https://en.wikipedia.org/wiki/Pendulum">here</a>.</p>
</div>
<hr class="docutils" />
<div class="section" id="topology-layout">
<h2>Topology Layout<a class="headerlink" href="#topology-layout" title="Permalink to this headline">¶</a></h2>
<p>The mechanism consists of 1 Body + 1 Ground. Therefore, total system
coordinates -including the ground- is
<span class="math notranslate nohighlight">\(n=n_b\times7 = 2\times7 = 14\)</span>, where <span class="math notranslate nohighlight">\(n_b\)</span> is the total number of
bodies in the system. <a class="footnote-reference brackets" href="#id2" id="id1">1</a></p>
<div class="section" id="list-of-bodies">
<h3>List of Bodies<a class="headerlink" href="#list-of-bodies" title="Permalink to this headline">¶</a></h3>
<p>The list of bodies is given below:</p>
<ul class="simple">
<li><p>Pendulum body <span class="math notranslate nohighlight">\(body\)</span>.</p></li>
</ul>
</div>
<div class="section" id="connectivity">
<h3>Connectivity<a class="headerlink" href="#connectivity" title="Permalink to this headline">¶</a></h3>
<p>The system connectivity is as follows:</p>
<ul class="simple">
<li><p>Pendulum <span class="math notranslate nohighlight">\(body\)</span> is connected to the <strong>ground</strong> by a revolute joint,
resulting in constraint equations <span class="math notranslate nohighlight">\(n_{c,rev} = 5\)</span>.</p></li>
</ul>
<table class="colwidths-given docutils align-default" id="id3">
<caption><span class="caption-text">Connectivity Table</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Joint Name</p></th>
<th class="head"><p>Body i</p></th>
<th class="head"><p>Body j</p></th>
<th class="head"><p>Joint Type</p></th>
<th class="head"><p><span class="math notranslate nohighlight">\(n_c\)</span></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>a</p></td>
<td><p><span class="math notranslate nohighlight">\(ground\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(body\)</span></p></td>
<td><p>Revolute</p></td>
<td><p><span class="math notranslate nohighlight">\(5\)</span></p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="degrees-of-freedom">
<h3>Degrees of Freedom<a class="headerlink" href="#degrees-of-freedom" title="Permalink to this headline">¶</a></h3>
<p>The degrees of freedom of the system can be calculated as:</p>
<div class="math notranslate nohighlight">
\[n-( n_{c,rev}+n_{c,P}+n_{c,g}) = 14 - (5 + (1 \times 1) + 7) = 14 - 13 = 1\]</div>
<p>Where:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(n_{c,P}\)</span> represents the constraints due to euler-parameters
normalization equations.</p></li>
<li><p><span class="math notranslate nohighlight">\(n_{c,g}\)</span> represents the constraints due to the ground constraints.</p></li>
<li><p><span class="math notranslate nohighlight">\(n_{c,rev}\)</span> represents the constraints due to the revolute joint.</p></li>
</ul>
</div>
</div>
<hr class="docutils" />
<div class="section" id="symbolic-topology">
<h2>Symbolic Topology<a class="headerlink" href="#symbolic-topology" title="Permalink to this headline">¶</a></h2>
<p>In this section, we create the symbolic topology that captures the topological
layout that we discussed earlier. <br>
Defining the topology is very simple. We start by importing the
<code class="docutils literal notranslate"><span class="pre">standalone_topology</span></code> class and create a new instance that represents our
symbolic model, let it be <code class="docutils literal notranslate"><span class="pre">sym_model</span></code>.
Then we start adding the components we discussed earlier, starting by the
bodies, then the joints, actuators and forces, and thats it. <br>
These components will be represented symbolically, and therefore there is no
need for any numerical inputs at this step.</p>
<p>The system is stored in a form of a network graph that stores all the data
needed for the assemblage of the system equations later. But even before the
assemblage process, we can gain helpful insights about our system as well be
shown.</p>
<div class="section" id="directories-construction">
<h3>Directories Construction<a class="headerlink" href="#directories-construction" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># standard library imports</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="c1"># getting directory of current file and specifying the directory</span>
<span class="c1"># where data will be saved</span>
<span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;model&quot;</span><span class="p">,</span> <span class="s2">&quot;symenv&quot;</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">data_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="s2">&quot;model/symenv/data&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="topology-construction">
<h3>Topology Construction<a class="headerlink" href="#topology-construction" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># uraeus imports</span>
<span class="kn">from</span> <span class="nn">uraeus.smbd.systems</span> <span class="kn">import</span> <span class="n">standalone_topology</span><span class="p">,</span> <span class="n">configuration</span>

<span class="c1"># ============================================================= #</span>
<span class="c1">#                       Symbolic Topology</span>
<span class="c1"># ============================================================= #</span>

<span class="c1"># Creating the symbolic topology as an instance of the</span>
<span class="c1"># standalone_topology class</span>
<span class="n">project_name</span> <span class="o">=</span> <span class="s1">&#39;pendulum&#39;</span>
<span class="n">sym_model</span> <span class="o">=</span> <span class="n">standalone_topology</span><span class="p">(</span><span class="n">project_name</span><span class="p">)</span>

<span class="c1"># Adding Bodies</span>
<span class="c1"># =============</span>
<span class="n">sym_model</span><span class="o">.</span><span class="n">add_body</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)</span>

<span class="c1"># Adding Joints</span>
<span class="c1"># =============</span>
<span class="n">sym_model</span><span class="o">.</span><span class="n">add_joint</span><span class="o">.</span><span class="n">revolute</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;ground&#39;</span><span class="p">,</span> <span class="s1">&#39;rbs_body&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="symbolic-characteristics">
<h3>Symbolic Characteristics<a class="headerlink" href="#symbolic-characteristics" title="Permalink to this headline">¶</a></h3>
<p>Now, we can gain some insights about our topology using our <code class="docutils literal notranslate"><span class="pre">sym_model</span></code>
instance. By accessing the <code class="docutils literal notranslate"><span class="pre">topology</span></code> attribute of the <code class="docutils literal notranslate"><span class="pre">sym_model</span></code>, we can
visualize the connectivity of the model as a network graph using the
<code class="docutils literal notranslate"><span class="pre">sym_model.topology.draw_constraints_topology()</span></code> method, where the nodes
represent the bodies, and the edges represent the joints, forces and/or
actuators between the bodies.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sym_model</span><span class="o">.</span><span class="n">topology</span><span class="o">.</span><span class="n">draw_constraints_topology</span><span class="p">()</span>
</pre></div>
</div>
<p>Also, we can check the system’s number of generalized coordinates  <span class="math notranslate nohighlight">\(n\)</span>
and number of constraints  <span class="math notranslate nohighlight">\(nc\)</span>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">sym_model</span><span class="o">.</span><span class="n">topology</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="n">sym_model</span><span class="o">.</span><span class="n">topology</span><span class="o">.</span><span class="n">nc</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="assembling">
<h3>Assembling<a class="headerlink" href="#assembling" title="Permalink to this headline">¶</a></h3>
<p>This is the last step of the symbolic building process, where we ask the
system to assemble the governing equations, which will be used then in the
code generation for the numerical simulation, as well as further symbolic
manipulations.</p>
<p>Also, we can export/save a <em>pickled</em> version of the model.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Assembling and Saving model</span>
<span class="n">sym_model</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">data_dir</span><span class="p">)</span>
<span class="n">sym_model</span><span class="o">.</span><span class="n">assemble</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The equations’ notations will be discussed in another part of the
documentation.</p>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="symbolic-configuration">
<h2>Symbolic Configuration<a class="headerlink" href="#symbolic-configuration" title="Permalink to this headline">¶</a></h2>
<p>In this step we define a symbolic configuration of our symbolic topology.
As you may have noticed in the symbolic topology building step, we only cared
about the <strong>topology</strong>, thats is the system bodies and their connectivity, and
we did not care explicitly with how these components are configured in space.</p>
<p>In order to create a valid numerical simulation session, we have to provide the
system with its numerical configuration needed, for example, the joints’
locations and orientations. The symbolic topology in its raw form will require
you to manually enter all these numerical arguments, which can be cumbersome
even for smaller systems. This can be checked by checking the configuration
inputs of the symbolic configuration as <code class="docutils literal notranslate"><span class="pre">sym_config.config.input_nodes</span></code></p>
<p>Here we start by stating the symbolic inputs we wish to use instead of the
default inputs set, and then we define the relation between these newly defined
arguments and the original ones.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># ============================================================= #</span>
<span class="c1">#                     Symbolic Configuration</span>
<span class="c1"># ============================================================= #</span>

<span class="c1"># Symbolic configuration name.</span>
<span class="n">config_name</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_cfg&quot;</span><span class="o">%</span><span class="n">project_name</span>

<span class="c1"># Symbolic configuration instance.</span>
<span class="n">sym_config</span> <span class="o">=</span> <span class="n">configuration</span><span class="p">(</span><span class="n">config_name</span><span class="p">,</span> <span class="n">sym_model</span><span class="p">)</span>

<span class="c1"># Adding the desired set of UserInputs</span>
<span class="c1"># ====================================</span>
<span class="n">sym_config</span><span class="o">.</span><span class="n">add_point</span><span class="o">.</span><span class="n">UserInput</span><span class="p">(</span><span class="s1">&#39;p1&#39;</span><span class="p">)</span>
<span class="n">sym_config</span><span class="o">.</span><span class="n">add_point</span><span class="o">.</span><span class="n">UserInput</span><span class="p">(</span><span class="s1">&#39;p2&#39;</span><span class="p">)</span>

<span class="n">sym_config</span><span class="o">.</span><span class="n">add_vector</span><span class="o">.</span><span class="n">UserInput</span><span class="p">(</span><span class="s1">&#39;v&#39;</span><span class="p">)</span>

<span class="c1"># Defining Relations between original topology inputs</span>
<span class="c1"># and our desired UserInputs.</span>
<span class="c1"># ===================================================</span>

<span class="c1"># Revolute Joint (a) location and orientation</span>
<span class="n">sym_config</span><span class="o">.</span><span class="n">add_relation</span><span class="o">.</span><span class="n">Equal_to</span><span class="p">(</span><span class="s1">&#39;pt1_jcs_a&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;hps_p1&#39;</span><span class="p">,))</span>
<span class="n">sym_config</span><span class="o">.</span><span class="n">add_relation</span><span class="o">.</span><span class="n">Equal_to</span><span class="p">(</span><span class="s1">&#39;ax1_jcs_a&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;vcs_v&#39;</span><span class="p">,))</span>

<span class="c1"># Creating Geometries</span>
<span class="c1"># ===================</span>
<span class="n">sym_config</span><span class="o">.</span><span class="n">add_scalar</span><span class="o">.</span><span class="n">UserInput</span><span class="p">(</span><span class="s1">&#39;radius&#39;</span><span class="p">)</span>

<span class="n">sym_config</span><span class="o">.</span><span class="n">add_geometry</span><span class="o">.</span><span class="n">Sphere_Geometry</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;hps_p2&#39;</span><span class="p">,</span> <span class="s1">&#39;s_radius&#39;</span><span class="p">))</span>
<span class="n">sym_config</span><span class="o">.</span><span class="n">assign_geometry_to_body</span><span class="p">(</span><span class="s1">&#39;rbs_body&#39;</span><span class="p">,</span> <span class="s1">&#39;gms_body&#39;</span><span class="p">)</span>

<span class="c1"># Exporting the configuration as a JSON file</span>
<span class="n">sym_config</span><span class="o">.</span><span class="n">export_JSON_file</span><span class="p">(</span><span class="n">data_dir</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The details of this process will be discussed in another part of the
documentation.</p>
</div>
<hr class="docutils" />
<dl class="footnote brackets">
<dt class="label" id="id2"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p><strong>uraeus.smbd</strong> uses <a class="reference external" href="https://en.wikibooks.org/wiki/Multibody_Mechanics/Euler_Parameters">euler-parameters</a>
-which is a 4D unit quaternion- to represents bodies orientation in
space. This makes the generalized coordinates used to fully define a
body in space to be <strong>7,</strong> instead of <strong>6</strong>, it also adds an algebraic
equation to the constraints that ensures the unity/normalization of the
body quaternion. This is an important remark as the calculations of the
degrees-of-freedom depends on it.</p>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../template_based_topologies/index.html" class="btn btn-neutral float-right" title="Template-Based Topologies" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Standalone Topologies" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Khaled Ghobashy

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>